



<link rel="stylesheet" href="/build/ol.css" type="text/css">
<link rel="stylesheet" href="/build/samples.css" type="text/css" />

<style>
  .map {
    height: 100vh;
    width: 100%;
  }

  .ol-attribution.ol-uncollapsible {
    bottom: 0;
    right: 0;
    border-radius: 4px 0 0;
    display: none !important;
  }
</style>





<!-- <div id="mapid"></div> -->

<div id="map" class="map"></div>
<div id="mouse-position"></div>
<div id="mapdiv"></div>

<div id="map"></div>

<div class="manage">
  <div class="img">
    <img src="/img/jac-6ton-origi.png" alt="">
  </div>
  <div class="info">
    <h3 style="
    font-size: 12px;
    direction: rtl;
    padding: 6px;
">میزان کارکرد: <span>۲۰ کیلومتر</span></h3>

    <div class="col-md-12" style="
    padding: 3px;
">
      <div class="hpanel" style="
      margin-bottom: 0;
  ">
        <div class="panel-body" style="
          direction: rtl;
      ">
          <div class="stats-title">
            <h4>سطح آب مخزن</h4>
          </div>
          <div class="m-t-lg">
            <div class="progress m-t-xs full progress-small" style="
                  position: unset;
              ">
              <div style="width: 25%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="25" role="progressbar"
                class=" progress-bar progress-bar-danger">
                <span class="sr-only">۳۵٪ تکمیل (موفق)</span>
              </div>
            </div>




          </div>

        </div>
      </div>
    </div>


    <div class="col-md-12" style="
    padding: 3px;
">
      <div class="hpanel">
        <div class="panel-body" style="
        padding-top: 0px;
    ">
          <div class="stats-title pull-right">
            <h4>پرسنل آمده به کار</h4>
          </div>
          <div class="flot-chart m-t-lg" style="height: 120px">
            <div class="flot-chart-content" id="flot-pie-chart"
              style="height: 120px; padding: 0px; position: relative;"><canvas class="flot-base" width="192"
                height="120"
                style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 192px; height: 120px;"></canvas><canvas
                class="flot-overlay" width="192" height="120"
                style="direction: ltr; position: absolute; left: 0px; top: 0px; width: 192px; height: 120px;"></canvas>
              <div class="legend">
                <div
                  style="position: absolute; width: 44px; height: 60px; top: 5px; right: 5px; background-color: rgb(255, 255, 255); opacity: 0.85;">
                </div>
                <table style="position:absolute;top:5px;right:5px;font-size:smaller;color:#545454;direction: rtl;">
                  <tbody>
                    <tr>
                      <td class="legendColorBox">
                        <div style="border:1px solid #ccc;padding:1px">
                          <div style="width:4px;height:0;border:5px solid #93f979;overflow:hidden"></div>
                        </div>
                      </td>
                      <td class="legendLabel">ساسان شهسواری</td>
                    </tr>
                    <tr>
                      <td class="legendColorBox">
                        <div style="border:1px solid #ccc;padding:1px">
                          <div style="width:4px;height:0;border:5px solid #fde5ad;overflow:hidden"></div>
                        </div>
                      </td>
                      <td class="legendLabel">محسن کرمی</td>
                    </tr>
                    <tr>
                      <td class="legendColorBox">
                        <div style="border:1px solid #ccc;padding:1px">
                          <div style="width:4px;height:0;border:5px solid #93f979;overflow:hidden"></div>
                        </div>
                      </td>
                      <td class="legendLabel">بهنام بیابانی</td>
                    </tr>
                    <tr>
                      <td class="legendColorBox">
                        <div style="border:1px solid #ccc;padding:1px">
                          <div style="width:4px;height:0;border:5px solid #ff6f6f;overflow:hidden"></div>
                        </div>
                      </td>
                      <td class="legendLabel">محسن کرمی</td>
                    </tr>
                    <tr>
                      <td class="legendColorBox">
                        <div style="border:1px solid #ccc;padding:1px">
                          <div style="width:4px;height:0;border:5px solid #fde5ad;overflow:hidden"></div>
                        </div>
                      </td>
                      <td class="legendLabel">یداله نصوری</td>
                    </tr>
                    <tr>
                      <td class="legendColorBox">
                        <div style="border:1px solid #ccc;padding:1px">
                          <div style="width:4px;height:0;border:5px solid #ff6f6f;overflow:hidden"></div>
                        </div>
                      </td>
                      <td class="legendLabel">علی خدایاری</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="btn">
            <a href="/admin/gis/info" class="btn btn-info btn-sm">اطلاعات بیشتر</a>
          </div>
        </div>
      </div>
    </div>


  </div>
</div>

<div class="sidbar">
  <ul>
    <img src="/mobilelogo.png" alt="">
    <li><a href="">گزارش مسیر حرکت <i class="fa fa-tachometer"></i></a></li>
    <li><a href="">گزارش لحظه ای <i class="fa fa-tachometer"></i></a></li>
    <li><a href="">مدیریت خودروها <i class="fa fa-tachometer"></i></a></li>
    <li><a href="">مدیریت راننده ها <i class="fa fa-tachometer"></i></a></li>
    <li><a href="">گزارش وقایع <i class="fa fa-tachometer"></i></a></li>
    <li><a href="">راهنمای مسیر <i class="fa fa-tachometer"></i></a></li>

  </ul>
</div>
<script src="/build/ol.js"></script>
<!-- <script src="/build/OpenLayers.js"></script> -->




<script type="text/javascript">
  var osm_default = new ol.layer.Tile({
    source: new ol.source.OSM()
  });








  var map = new ol.Map({
    layers: [osm_default],
    target: 'map',
    view: new ol.View({
      center: ol.proj.transform([47.10, 34.33], 'EPSG:4326', 'EPSG:3857'),
      zoom: 12.5
    })
  });




  function add_map_point(lat, lng, name) {

    var layer = new ol.layer.Vector({
      source: new ol.source.Vector({
        features: [
          new ol.Feature({
            geometry: new ol.geom.Point(ol.proj.fromLonLat([lat, lng]))
          })
        ]
      }),
      style: new ol.style.Style({
        image: new ol.style.Icon({
          anchor: [0.5, 0.5],
          anchorXUnits: "fraction",
          anchorYUnits: "fraction",
          src: "/fireimg.png"
        })
      }),



    });

    layer.on("click", function (e) {
      console.log('aaaaaaa')
    })
    var s = layer.set('name', name);
    map.addLayer(layer);
  }













  var layer = new ol.layer.Vector({
      source: new ol.source.Vector({
        features: [
          new ol.Feature({
            geometry: new ol.geom.Point(ol.proj.fromLonLat([47.07, 34.35]))
          })
        ]
      }),
      style: new ol.style.Style({
        image: new ol.style.Icon({
          anchor: [0.5, 0.5],
          anchorXUnits: "fraction",
          anchorYUnits: "fraction",
          src: "/fireimg.png"
        })
      }),



    });


    var s = layer.set('name', name);
    map.addLayer(layer);


    layer.on("click", function (e) {
      console.log('aaaaaaa')
    })

    layer.on('select', function(e) {
    let featureSelected = e.selected[0];
    let layer = selectClick.getLayer(featureSelected);
    console.log('JJJJJJJJJJJJJJJJJJJJJJJJJJ'); // here you have the selected layer
});


  // add_map_point(47.07, 34.35, 'a');
  // add_map_point(47.05, 34.36, 'b');
  // add_map_point(47.08, 34.33, 'c');
  // add_map_point(47.04, 34.32, 'd');
  // add_map_point(47.11, 34.38, 'e');
  // add_map_point(47.11, 34.36, 'f');
  // add_map_point(47.02, 34.34, 'j');
  // add_map_point(47.07, 34.31, 'h');




  marker = new ol.Feature({
    geometry: new ol.geom.Point([47.07, 34.35]),
    name: "Location Marker"
  });
  console.log(marker)

  markerStyle = new ol.style.Style({
    image: new ol.style.Icon({
      anchor: [0.5, 0.5],
      anchorXUnits: "fraction",
      anchorYUnits: "fraction",
      src: "/fireimg.png"
    })
  })

  marker.setStyle(markerStyle);
  marker.on("click", function (e) {
    console.log('WWWWWWWWWWWWWWWWWWWWWWWWWWW')

  }, marker);
  map.addOverlay(marker);

  //   var layer = new ol.layer.Vector({
  //      source: new ol.source.Vector({
  //          features: [
  //              new ol.Feature({
  //                  geometry: new ol.geom.Point(ol.proj.fromLonLat([47.05, 34.33]))
  //              })
  //          ]
  //      })
  //  });
  //  map.addLayer(layer);









</script>